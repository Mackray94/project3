apiversion: v1
kind: deployment
metadata:
 name: backend-user
spec:
 selector:
  matchLabels:
   run: backend-user
 replica: 2
template:
 metadata:
  labels:
  run: backend-user
 spec:
  containers:
   -name: backend-user
    image: docker.io/mackray94/udagram-api-user:v1
    imagePullPolicy: Always
    port:
    -containerport: 8080
    resource:
     limit:
       cpu: 500m
       memory: "1024MI"
     request:
       cpu: 250m
       memory: "128MI"
   envfrom:
      - secretRef:
         name: env-secret
      - configMapRef:
         name: env-config
      - secretRef:
         name: aws-secret







  
